mapc.me
==================================================

Definition
-------------------------------------------------------------------------------
* MapC.me = PHP Codebone + CMS With Dublin core

* Easy, Fast, Free (from something like php grammar)
* 쉽고 빠르고 (PHP문법 이외의 규칙에) 구속되지 않습니다.

Characteristic / 특징
-------------------------------------------------------------------------------

* Pure PHP

* MVC

* Easy update for site manager

* Fast running time

* RESTFull..........하게 만드려고 노력중입니다. ^^;

Directory structure / 디렉토리 구조
-------------------------------------------------------------------------------

    app/
        admin/
            + 관리자용 모듈
            + 일반모듈과의 차이는 거의 없음
            + 다만 보안에 민감한 프로그램들이 있을 경우 admin에 넣어두는 것을 권장
        module/ 일반 모듈
            + 프로그램 개별 모듈들
            + 각 모듈의 페이지마다 목록보기면 딱 목록보기만, 글쓰기면 글쓰기, 글쓰기처리 면 글쓰기 처리에 관한 것만 모아둠
        site/
            + 사이트에 특화된 페이지이거나
            + 위의 모듈들을 합쳐서 필요한대로 재구성한 페이지들
            + SNS 타임라인 같은 경우 [사용자모듈 프로필페이지] + [맵씨 모듈의 리스트페이지]같은 형태로 두개 이상의 모듈을 합쳐서 사용할 수 있음
            YOURSITE/
                config/ : 환경설정
                    locale/
                    menu/
                ctrlers/ : 컨트롤러
                data/ : 프로그램 실행중 생성되는 화일들 (백업이 필요한 것들)
                proc/ : Procedure
                views/ : 뷰화일
    public/
        layout/
        vendor/
    system/
        init/
        library/
        proc/
    temp/
        cache/
        session/
    vendor/
        CLASSES from 3rd-party


Process / 프로그램 구동절차
-------------------------------------------------------------------------------

1. 사용자는 http://SITE_URL/home/dashboard/ 와 같은 형태로 접근

2. index.php

2.1. env.php
    사이트 설정

2.2. bootstrap.php

2.2.1. 디렉토리 지정하는 상수 설정

2.2.2. 넘김값(argument)들 $ARGS변수에 넣기

2.3. config
    사이트 운영에 필수적인 환경설정

2.4. custom
    부수적인 설정(API설정 같은 필수적이지 않지만 설정이 필요한 것들)

2.5. routes
    넘김값을 재구성하는 화일..
    SITE_URL/page_uid 요청을 내부적으로 /view/page_uid 처럼 변경하려고 할 때

2.7. controllers

2.7.1. set path of controller page
    어느 디렉토리에서 page.php 를 가져올 지 결정 (admin/, module/, site/)

2.7.2. include controller page
    필요한 페이지 호출

2.8. publish.proc.php
    화면 출력

2.8.1. show view file
    스킨 화일 출력



Goal / 목적
-------------------------------------------------------------------------------

* 자체서버 또는 클라우드 서비스와 연동한 맵시미 서비스

* 각 맵시미 서버들을 연동시켜 원하는 자료를 찾기 쉽도록...

* 자료를 형태별이 아닌 주제별로 분류합니다.

    * 하드에 자료를 쌓아 둘때... [여행], [동물]... 이런식으로 분류하지 [사진], [글], [URL] 이렇게 분류하지는 않잖아요?

    * MAPC CMS 도 똑같은 방식으로 자료를 처리합니다. 때문에 하드에 있는 자료를 그대로 서버에서 활용할 수 있습니다.



잡담
-------------------------------------------------------------------------------

### 모듈 ###

* 모듈의 경우 기본적인 단순기능 위주로 페이지를 구성하고
* 복잡한 기능이 필요한 것들은 app/site/ 에서 처리하는 걸 원칙으로 한다.
* 예를 들어, 앨범과 최신글 출력이 필요한 대쉬보드의 경우 앨범출력(Album/list.php)과 최신글(MAPC/latest.php)을 각각 가져와서 dashboard.view 화일에 하나로 통합해서 보여주는 방식으로 한다.
* 따라서 맵시에서는 기존 다른 프로그램에서는 '모양'에 따라서 섹션, 페이지, 위젯의 구분없이 각각의 '모듈'로 구분한다.
```
dashboard.php
$VIEW['album'] = include(album/list.php);
$VIEW['mapc']  = include(mapc/list.php);

dashboard.view.php
<div>
    mapc_file_skin_include(album/list.view.php, $VIEW['album']);
</div>
<div>
    mapc_file_skin_include(mapc/list.view.php, $VIEW['mapc']);
</div>
```

* 물론 각각의 모듈 개별적인 출력도 가능하다.
```
list.php
$VIEW['hello'] = 'world';

list.view.php
<?= $VIEW['hello']; ?>
```

### 메뉴 ###

* 메뉴는 레이아웃에 따라 약간의 변화가 필요하다.
* 원래 메뉴도 하나의 '모듈'로 처리하려했으나 모든 레이아웃에 끼워맞추기에는 한계가 있어 VIEW디렉토리안에 함수를 만들어서 넣는 '모험'을 하기로 했다.
* 메뉴 구성은 환경설정에 title, link, sub 키를 갖는 배열로만 만들어두고
* 각 레이아웃에 맞는 함수를 각각의 레이아웃에 만들어서 '메뉴배열'을 재구성한다.


### 빠름 vs 느림 ###

* 모든 것은 '빠름'을 지향하지만
* 큰 판올림(1.0->2.0)만큼은 '느림'을 지향
* 예전 구조를 그대로 사용할 수 있는 구조가 될 것이라 기대
* 마이그레이션을 최소화 할 수 있도록


### 프로그램의 목적 ###

* 오프라인에서도 특별한 변환이 필요 없이 파일을 열수 있어야 한다. (파일 단위로 저장)

* 특정 프로그램에 얽매이지 않고 자료편집이 가능해야한다.

* 자료 형태(이미지,글,북마크 따위)로 구분하지 않고 주제로 구분한다.


### 이 프로그램을 만들게 된 이유 ###

* 개인 홈페이지를 만들면서 부터 이런 저런 자료를 올렸는데

* 그때는 홈페이지에 디자인 요소 까지 같이 넣어뒀었기 때문에 홈페이지 판올림 하면 그 안의 글들도 모두 판올림 해줘야 했었다.

* 싸이월드를 시작하면서 미니홈피라는곳에 글들을 올리기 시작... 디자인 바꾼다고 해도 각각의 글의 디자인을 다 바꿀 필요는 없지만 내가 가지고 있는 화일저장 구조와 서버의 화일저장 구조가 다르더라... (게다가 다른 서비스로 옮겨 가려하면 수동으로 글을 작성해야 했음)

* 내 자료를 내가 원하는 형태로 저장할 수 있는 곳이 없을까해서 이런 저런 온라인/오프라인, 블로그 위키를 찾아다님...
  다음블로그, 싸이월드 페이지(맞나?), 워드프레스, 스프링노트, 티스토리, 미디어 위키 따위...

* 그러다 닥북(국제표준)이라는 것을 알게 되고 닥북을 그대로 업로드 할 수 있는 블로그 또는 위키저장소가 있는지 또다시 검색
 
* 내 입맛에 가장맞는것은 다쿠위키... 하지만 그때 내가 집착한 것은 오로지 닥북이었고.. 다쿠위키의 문법이 눈에 들어오지 않음....

* 하지만 그도 잠시... 세상 모든 문서를 닥북으로 만들기가 불가능한것은 물론이고 내가 소유하고자 하는 문서들조차 닥북으로 변환하는 건 불가능

* 하지만 "표준"을 포기하지는 못하겠어서 선택한것이 더블린 코어

* 다쿠위키(doku)의 편리성에 온라인에서 무료로 이용 가능한 scriptgr.am 발견, 마크다운 형태만을 사용하지만 내가 가지고 있는 화일과 서버의 화일을 그대로 동기화 시킬 수 있다는 점에서 최고의 툴이라 생각됨. 여기에 다른 문서 형태는 쓰지못하더라도 더블린 코어를 사용한다면 더없이 좋은 서비스는 없을거라 생각됐지만 이미 검색 해볼만큼 해봤으니 더이상의 검색은 포기...

* 내가 직접 만들기로 함... ㅡ_ㅡa

* 더블린코어로 서버의 화일 들(문서 뿐만아니라 모든화일)에 대한 메타데이터 그리고 외부 주소에 대한 자원 들에 대해서도 각각을 더블린 코어로 저장.

* 스크립토 그램과 비슷한 방식으로 클라우드 서비스에 자료를 올려놓고 동기화를 시키돼 메타데이터 위주로 서비스...

* 글등록할 때 이미 개별의 페이지로 저장 되는 것 뿐만 아니라 내보내기를 할 때 각각의 포맷에 맞는 형태의 것들만 골라서 백업도 가능하게...
    (날짜가 들어있는 포맷-일기)라고 되어있는것들은 일정(ics)화일로 외부 링크가 들어있는 자료들은 북마크html 형태로...
